import{i as yt,j as R,k as vt,l as Pt,_ as B,o as _,b as g,e as t,m as Z,t as C,f as A,q as wt,h as W,F as L,d as N,r as O,a as ot,n as j,s as U,v as M,u as Y,x as St,c as xt,p as kt,g as At}from"./index-BbUD4Z56.js";import{l as Et,u as nt}from"./alert-CyfJ1fDy.js";import{m as rt,P as Ut,D as Ct}from"./DeleteModal-DHmQC4gG.js";var Tt={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/undefined",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_SITE:F,VITE_APP_PATH:H}=Tt,V=Et(),I=nt(),X=yt("adminProduct",{state:()=>({products:[],currentPage:1}),getters:{tagsList:({products:o})=>{const n=[];return o.forEach(b=>b.tags.forEach(x=>{n.includes(x)||n.push(x)})),n},totalPages:({products:o})=>Math.ceil(o.length/5),displayProducts:({products:o,currentPage:n})=>o.filter((b,x)=>Math.floor(x/5)===n-1)},actions:{switchPage(o){this.currentPage=o},getProducts(){V.createLoader("getProducts"),R.get(`${F}/api/${H}/admin/products/all`).then(o=>{const{products:n}=o.data;this.products=Object.values(n),this.switchPage(1)}).catch(o=>I.errorAlert(o)).finally(()=>V.removeLoader("getProducts"))},createProduct(o,n){V.createLoader("createProduct"),R.post(`${F}/api/${H}/admin/product`,{data:o}).then(b=>{const{message:x}=b.data;I.toastAlert(x,"success"),n(),this.getProducts()}).catch(b=>I.errorAlert(b)).finally(()=>V.removeLoader("createProduct"))},updateProduct(o,n){V.createLoader("updateProduct"),R.put(`${F}/api/${H}/admin/product/${o.id}`,{data:o}).then(b=>{I.toastAlert(b.data.message,"success"),n(),this.getProducts()}).catch(b=>I.errorAlert(b)).finally(()=>V.removeLoader("updateProduct"))},switchProductStatus(o){const n=o.is_enabled;V.createLoader("switchProductStatus"),R.put(`${F}/api/${H}/admin/product/${o.id}`,{data:{...o,is_enabled:!o.is_enabled}}).then(()=>{I.toastAlert(n?"成功下架":"成功上架","success"),this.getProducts()}).catch(b=>I.errorAlert(b)).finally(()=>V.removeLoader("switchProductStatus"))},deleteProduct(o,n){V.createLoader("deleteProduct"),R.delete(`${F}/api/${H}/admin/product/${o}`).then(()=>{I.toastAlert("我們懷念它 (´;ω;`)","success"),n(),this.getProducts()}).catch(b=>I.errorAlert(b)).finally(()=>V.removeLoader("deleteProduct"))}}});var st={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(o,n){(function(x,e){o.exports=e()})(vt,function(){return function(){var b={686:function(c,f,r){r.d(f,{default:function(){return gt}});var s=r(279),u=r.n(s),a=r(370),P=r.n(a),w=r(817),E=r.n(w);function y(m){try{return document.execCommand(m)}catch{return!1}}var S=function(l){var i=E()(l);return y("cut"),i},v=S;function $(m){var l=document.documentElement.getAttribute("dir")==="rtl",i=document.createElement("textarea");i.style.fontSize="12pt",i.style.border="0",i.style.padding="0",i.style.margin="0",i.style.position="absolute",i.style[l?"right":"left"]="-9999px";var d=window.pageYOffset||document.documentElement.scrollTop;return i.style.top="".concat(d,"px"),i.setAttribute("readonly",""),i.value=m,i}var tt=function(l,i){var d=$(l);i.container.appendChild(d);var p=E()(d);return y("copy"),d.remove(),p},lt=function(l){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},d="";return typeof l=="string"?d=tt(l,i):l instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(l==null?void 0:l.type)?d=tt(l.value,i):(d=E()(l),y("copy")),d},q=lt;function z(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(i){return typeof i}:z=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z(m)}var at=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=l.action,d=i===void 0?"copy":i,p=l.container,h=l.target,T=l.text;if(d!=="copy"&&d!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(h!==void 0)if(h&&z(h)==="object"&&h.nodeType===1){if(d==="copy"&&h.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(d==="cut"&&(h.hasAttribute("readonly")||h.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(T)return q(T,{container:p});if(h)return d==="cut"?v(h):q(h,{container:p})},ct=at;function D(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(i){return typeof i}:D=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},D(m)}function ut(m,l){if(!(m instanceof l))throw new TypeError("Cannot call a class as a function")}function et(m,l){for(var i=0;i<l.length;i++){var d=l[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,d.key,d)}}function dt(m,l,i){return l&&et(m.prototype,l),i&&et(m,i),m}function pt(m,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(l&&l.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),l&&K(m,l)}function K(m,l){return K=Object.setPrototypeOf||function(d,p){return d.__proto__=p,d},K(m,l)}function ft(m){var l=bt();return function(){var d=G(m),p;if(l){var h=G(this).constructor;p=Reflect.construct(d,arguments,h)}else p=d.apply(this,arguments);return mt(this,p)}}function mt(m,l){return l&&(D(l)==="object"||typeof l=="function")?l:ht(m)}function ht(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function bt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function G(m){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},G(m)}function Q(m,l){var i="data-clipboard-".concat(m);if(l.hasAttribute(i))return l.getAttribute(i)}var _t=function(m){pt(i,m);var l=ft(i);function i(d,p){var h;return ut(this,i),h=l.call(this),h.resolveOptions(p),h.listenClick(d),h}return dt(i,[{key:"resolveOptions",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof p.action=="function"?p.action:this.defaultAction,this.target=typeof p.target=="function"?p.target:this.defaultTarget,this.text=typeof p.text=="function"?p.text:this.defaultText,this.container=D(p.container)==="object"?p.container:document.body}},{key:"listenClick",value:function(p){var h=this;this.listener=P()(p,"click",function(T){return h.onClick(T)})}},{key:"onClick",value:function(p){var h=p.delegateTarget||p.currentTarget,T=this.action(h)||"copy",J=ct({action:T,container:this.container,target:this.target(h),text:this.text(h)});this.emit(J?"success":"error",{action:T,text:J,trigger:h,clearSelection:function(){h&&h.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(p){return Q("action",p)}},{key:"defaultTarget",value:function(p){var h=Q("target",p);if(h)return document.querySelector(h)}},{key:"defaultText",value:function(p){return Q("text",p)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(p){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return q(p,h)}},{key:"cut",value:function(p){return v(p)}},{key:"isSupported",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],h=typeof p=="string"?[p]:p,T=!!document.queryCommandSupported;return h.forEach(function(J){T=T&&!!document.queryCommandSupported(J)}),T}}]),i}(u()),gt=_t},828:function(c){var f=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function s(u,a){for(;u&&u.nodeType!==f;){if(typeof u.matches=="function"&&u.matches(a))return u;u=u.parentNode}}c.exports=s},438:function(c,f,r){var s=r(828);function u(w,E,y,S,v){var $=P.apply(this,arguments);return w.addEventListener(y,$,v),{destroy:function(){w.removeEventListener(y,$,v)}}}function a(w,E,y,S,v){return typeof w.addEventListener=="function"?u.apply(null,arguments):typeof y=="function"?u.bind(null,document).apply(null,arguments):(typeof w=="string"&&(w=document.querySelectorAll(w)),Array.prototype.map.call(w,function($){return u($,E,y,S,v)}))}function P(w,E,y,S){return function(v){v.delegateTarget=s(v.target,E),v.delegateTarget&&S.call(w,v)}}c.exports=a},879:function(c,f){f.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},f.nodeList=function(r){var s=Object.prototype.toString.call(r);return r!==void 0&&(s==="[object NodeList]"||s==="[object HTMLCollection]")&&"length"in r&&(r.length===0||f.node(r[0]))},f.string=function(r){return typeof r=="string"||r instanceof String},f.fn=function(r){var s=Object.prototype.toString.call(r);return s==="[object Function]"}},370:function(c,f,r){var s=r(879),u=r(438);function a(y,S,v){if(!y&&!S&&!v)throw new Error("Missing required arguments");if(!s.string(S))throw new TypeError("Second argument must be a String");if(!s.fn(v))throw new TypeError("Third argument must be a Function");if(s.node(y))return P(y,S,v);if(s.nodeList(y))return w(y,S,v);if(s.string(y))return E(y,S,v);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function P(y,S,v){return y.addEventListener(S,v),{destroy:function(){y.removeEventListener(S,v)}}}function w(y,S,v){return Array.prototype.forEach.call(y,function($){$.addEventListener(S,v)}),{destroy:function(){Array.prototype.forEach.call(y,function($){$.removeEventListener(S,v)})}}}function E(y,S,v){return u(document.body,y,S,v)}c.exports=a},817:function(c){function f(r){var s;if(r.nodeName==="SELECT")r.focus(),s=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var u=r.hasAttribute("readonly");u||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),u||r.removeAttribute("readonly"),s=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var a=window.getSelection(),P=document.createRange();P.selectNodeContents(r),a.removeAllRanges(),a.addRange(P),s=a.toString()}return s}c.exports=f},279:function(c){function f(){}f.prototype={on:function(r,s,u){var a=this.e||(this.e={});return(a[r]||(a[r]=[])).push({fn:s,ctx:u}),this},once:function(r,s,u){var a=this;function P(){a.off(r,P),s.apply(u,arguments)}return P._=s,this.on(r,P,u)},emit:function(r){var s=[].slice.call(arguments,1),u=((this.e||(this.e={}))[r]||[]).slice(),a=0,P=u.length;for(a;a<P;a++)u[a].fn.apply(u[a].ctx,s);return this},off:function(r,s){var u=this.e||(this.e={}),a=u[r],P=[];if(a&&s)for(var w=0,E=a.length;w<E;w++)a[w].fn!==s&&a[w].fn._!==s&&P.push(a[w]);return P.length?u[r]=P:delete u[r],this}},c.exports=f,c.exports.TinyEmitter=f}},x={};function e(c){if(x[c])return x[c].exports;var f=x[c]={exports:{}};return b[c](f,f.exports,e),f.exports}return function(){e.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return e.d(f,{a:f}),f}}(),function(){e.d=function(c,f){for(var r in f)e.o(f,r)&&!e.o(c,r)&&Object.defineProperty(c,r,{enumerable:!0,get:f[r]})}}(),function(){e.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)}}(),e(686)}().default})})(st);var Mt=st.exports;const $t=Pt(Mt),Vt={props:["value"],data(){return{clipboard:""}},mounted(){this.clipboard=new $t(this.$refs.trigger)}},Lt={class:"input-group"},It=["value"],Ot={class:"input-group-text","data-clipboard-target":"#clipboard-content",ref:"trigger"},Nt=t("button",{type:"button",class:"btn-origin"},[t("i",{class:"bi bi-copy"})],-1),Dt=[Nt];function Rt(o,n,b,x,e,c){return _(),g("div",Lt,[t("input",{type:"text",class:"form-control",id:"clipboard-content",value:b.value,readonly:""},null,8,It),t("span",Ot,Dt,512)])}const jt=B(Vt,[["render",Rt]]);var Ft={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/undefined",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_SITE:Ht,VITE_APP_PATH:Bt}=Ft,zt={components:{ClipboardComponent:jt},props:["clipboardVisible","uploadState"],emits:["update-upload-state","add-new-image"],data(){return{image:{},isUploading:!1,imageUrl:""}},methods:{...Z(nt,["errorAlert","uploadAlert"]),confirmUpload(){if(this.$refs.file.files.length){const o=this.$refs.file.files[0];this.image=o}else this.reset()},upload(){if(this.uploadAlert(this.image)){this.isUploading=!0;const n=new FormData;n.append("file-to-upload",this.image),this.$http.post(`${Ht}/api/${Bt}/admin/upload`,n).then(b=>{const{imageUrl:x}=b.data;this.imageUrl=x,this.reset()}).catch(b=>this.errorAlert(b)).finally(()=>{this.isUploading=!1})}},reset(){this.$refs.form.reset(),this.image={}},updateState(o){this.$emit("update-upload-state",o)},addNewImage(o){this.$emit("add-new-image",o)}},watch:{isUploading(o){this.updateState(o)},imageUrl(o){o&&this.addNewImage(o)}},mounted(){this.isUploading=this.uploadState}},Gt=t("p",{class:"fs-7 text-danger"},"僅限 JPG、JPEG 與 PNG 格式，檔案大小限制為 3MB 以下。",-1),Jt={method:"post",enctype:"multipart/form-data",ref:"form"},Yt={key:0,class:"alert bg-light"},Xt=t("p",{class:"fw-bold"},"檔案資訊",-1),qt={class:"mb-0"},Kt=["disabled"],Qt={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Wt={key:0,class:"alert bg-light mt-3"},Zt=t("p",null,"複製圖片網址：",-1),te=["src"];function ee(o,n,b,x,e,c){const f=O("clipboard-component");return _(),g(L,null,[Gt,t("form",Jt,[t("input",{type:"file",name:"file-to-upload",class:"form-control mb-3",onChange:n[0]||(n[0]=(...r)=>c.confirmUpload&&c.confirmUpload(...r)),ref:"file"},null,544),e.image.name?(_(),g("div",Yt,[Xt,t("p",null,"檔案名稱："+C(e.image.name),1),t("p",null,"檔案大小："+C(e.image.size)+" bytes",1),t("p",qt,"檔案格式："+C(e.image.type),1)])):A("",!0),t("button",{type:"submit",class:"btn btn-primary",onClick:n[1]||(n[1]=wt((...r)=>c.upload&&c.upload(...r),["prevent"])),disabled:e.isUploading},[e.isUploading?(_(),g("span",Qt)):A("",!0),W(" "+C(e.isUploading?"上傳中，請稍候":"確認上傳"),1)],8,Kt)],512),b.clipboardVisible?(_(),g(L,{key:0},[e.imageUrl?(_(),g("div",Wt,[Zt,N(f,{value:e.imageUrl},null,8,["value"]),t("img",{class:"mt-3",src:e.imageUrl,alt:"uploaded-image-preview"},null,8,te)])):A("",!0)],64)):A("",!0)],64)}const it=B(zt,[["render",ee]]),oe={components:{UploadForm:it},mixins:[rt],props:["tempProduct"],data(){return{modal:"",title:"",tab:"content",product:{imagesUrl:[],tags:[]},uploadState:!1}},computed:{...ot(X,["tagsList"])},watch:{tempProduct(){this.updateData()}},methods:{...Z(X,["createProduct","updateProduct"]),updateData(){this.product=this.tempProduct,this.title=this.tempProduct.title;const{imagesUrl:o,tags:n}=this.tempProduct;this.product.imagesUrl=Array.isArray(o)?[...o]:[],this.product.tags=Array.isArray(n)?[...n]:[],this.tab="content"},addNewImage(o){this.product.imageUrl?this.product.imagesUrl.push(o):this.product.imageUrl=o},confirmUpdate(){this.product.imagesUrl=this.product.imagesUrl.filter(o=>o),this.product.tags=this.product.tags.filter(o=>o),this.product.id?this.updateProduct(this.product,this.hideModal):this.createProduct(this.product,this.hideModal)},updateState(o){this.uploadState=o}},mounted(){this.updateData()}},k=o=>(kt("data-v-94462d2e"),o=o(),At(),o),ne={class:"modal modal-lg fade",tabindex:"-1",ref:"modal"},re={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content"},ie={class:"modal-header"},le={class:"mb-0"},ae=k(()=>t("i",{class:"bi bi-x-circle-fill"},null,-1)),ce=[ae],ue={class:"modal-body"},de={class:"nav nav-pills bg-light rounded-2 mb-3"},pe={class:"nav-item flex-grow-1"},fe={class:"nav-item flex-grow-1"},me={class:"nav-item flex-grow-1"},he={class:"nav-item flex-grow-1"},be={class:"nav-item flex-grow-1"},_e={class:"p-3 border rounded-2"},ge={class:"mb-3"},ye=k(()=>t("label",{class:"form-label",for:"title"}," 商品名稱",-1)),ve={class:"mb-3"},Pe=k(()=>t("label",{class:"form-label",for:"subtitle"}," 商品別名",-1)),we={class:"mb-3"},Se=k(()=>t("label",{class:"form-label",for:"content"}," 商品規格",-1)),xe={class:"row row-cols-2"},ke={class:"col"},Ae=k(()=>t("label",{class:"form-label",for:"category"}," 商品分類",-1)),Ee={class:"col"},Ue=k(()=>t("label",{class:"form-label",for:"unit"}," 商品單位",-1)),Ce={key:1},Te=k(()=>t("label",{class:"form-label",for:"description"}," 商品介紹",-1)),Me={class:"mb-3"},$e=k(()=>t("label",{class:"form-label",for:"origin_price"}," 商品原價",-1)),Ve=k(()=>t("label",{class:"form-label",for:"price"}," 商品售價",-1)),Le={key:3},Ie=k(()=>t("p",null,"商品標籤",-1)),Oe={class:"d-flex gap-2 flex-wrap mb-3"},Ne=["onClick"],De={class:"badge p-2 bg-subtle text-primary fs-6"},Re={class:"row g-3 mb-3"},je=["onUpdate:modelValue"],Fe=["onClick"],He=k(()=>t("i",{class:"bi bi-x-lg"},null,-1)),Be=[He],ze={class:"mb-3"},Ge=k(()=>t("label",{class:"form-label",for:"imageUrl"}," 主圖網址",-1)),Je=["src","alt"],Ye={key:0,class:"mb-3"},Xe=k(()=>t("p",null,"副圖網址",-1)),qe={class:"row g-3"},Ke=["onUpdate:modelValue"],Qe=["onClick"],We=k(()=>t("i",{class:"bi bi-x-lg"},null,-1)),Ze=[We],to=["src","alt"],eo=["disabled"],oo={class:"p-3 border rounded-2 mt-3"},no=k(()=>t("h5",{class:"fw-bold mb-3"},"上傳圖片",-1)),ro={class:"modal-footer"};function so(o,n,b,x,e,c){const f=O("loading-overlay"),r=O("upload-form");return _(),g("div",ne,[t("div",re,[N(f,{"is-loading":e.uploadState,"is-full":!1},null,8,["is-loading"]),t("div",se,[t("div",ie,[t("h4",le,C(e.title?e.title:"新增商品"),1),t("button",{type:"button",class:"btn border-0 p-0 fs-4",onClick:n[0]||(n[0]=(...s)=>o.hideModal&&o.hideModal(...s))},ce)]),t("div",ue,[t("ul",de,[t("li",pe,[t("button",{type:"button",onClick:n[1]||(n[1]=s=>e.tab="content"),class:j(["w-100 nav-link",{active:e.tab==="content"}])}," 商品內容",2)]),t("li",fe,[t("button",{type:"button",onClick:n[2]||(n[2]=s=>e.tab="description"),class:j(["w-100 nav-link",{active:e.tab==="description"}])}," 商品介紹",2)]),t("li",me,[t("button",{type:"button",onClick:n[3]||(n[3]=s=>e.tab="price"),class:j(["w-100 nav-link",{active:e.tab==="price"}])}," 商品售價",2)]),t("li",he,[t("button",{type:"button",onClick:n[4]||(n[4]=s=>e.tab="tags"),class:j(["w-100 nav-link",{active:e.tab==="tags"}])}," 商品標籤",2)]),t("li",be,[t("button",{type:"button",onClick:n[5]||(n[5]=s=>e.tab="image"),class:j(["w-100 nav-link",{active:e.tab==="image"}])}," 商品圖片",2)])]),t("form",_e,[e.tab==="content"?(_(),g(L,{key:0},[t("div",ge,[ye,U(t("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":n[6]||(n[6]=s=>e.product.title=s)},null,512),[[M,e.product.title,void 0,{trim:!0}]])]),t("div",ve,[Pe,U(t("input",{type:"text",id:"subtitle",class:"form-control","onUpdate:modelValue":n[7]||(n[7]=s=>e.product.subtitle=s)},null,512),[[M,e.product.subtitle,void 0,{trim:!0}]])]),t("div",we,[Se,U(t("input",{type:"text",id:"content",class:"form-control","onUpdate:modelValue":n[8]||(n[8]=s=>e.product.content=s)},null,512),[[M,e.product.content,void 0,{trim:!0}]])]),t("div",xe,[t("div",ke,[Ae,U(t("input",{type:"text",id:"category",class:"form-control","onUpdate:modelValue":n[9]||(n[9]=s=>e.product.category=s)},null,512),[[M,e.product.category,void 0,{trim:!0}]])]),t("div",Ee,[Ue,U(t("input",{type:"text",id:"unit",class:"form-control","onUpdate:modelValue":n[10]||(n[10]=s=>e.product.unit=s)},null,512),[[M,e.product.unit,void 0,{trim:!0}]])])])],64)):A("",!0),e.tab==="description"?(_(),g("div",Ce,[Te,U(t("textarea",{id:"description",class:"form-control",rows:"10","onUpdate:modelValue":n[11]||(n[11]=s=>e.product.description=s)},null,512),[[M,e.product.description,void 0,{trim:!0}]])])):A("",!0),e.tab==="price"?(_(),g(L,{key:2},[t("div",Me,[$e,U(t("input",{id:"origin_price",type:"number",class:"form-control","onUpdate:modelValue":n[12]||(n[12]=s=>e.product.origin_price=s),min:"1"},null,512),[[M,e.product.origin_price,void 0,{number:!0}]])]),t("div",null,[Ve,U(t("input",{id:"price",type:"number",class:"form-control","onUpdate:modelValue":n[13]||(n[13]=s=>e.product.price=s),min:"1"},null,512),[[M,e.product.price,void 0,{number:!0}]])])],64)):A("",!0),e.tab==="tags"?(_(),g("div",Le,[Ie,t("div",Oe,[(_(!0),g(L,null,Y(o.tagsList,s=>(_(),g("button",{key:s,type:"button",class:"btn btn-origin",onClick:u=>e.product.tags.push(s)},[t("span",De,C(s),1)],8,Ne))),128))]),t("div",Re,[(_(!0),g(L,null,Y(e.product.tags,(s,u)=>(_(),g("div",{class:"col-md-3 position-relative",key:s},[U(t("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.product.tags[u]=a},null,8,je),[[M,e.product.tags[u]]]),t("button",{type:"button",class:"btn btn-origin btn-inline",onClick:a=>e.product.tags.splice(u,1)},Be,8,Fe)]))),128))]),t("button",{type:"button",class:"btn btn-primary",onClick:n[14]||(n[14]=s=>e.product.tags.push(""))}," 新增標籤")])):A("",!0),e.tab==="image"?(_(),g(L,{key:4},[t("div",ze,[Ge,U(t("input",{id:"imageUrl",type:"text",class:"form-control mb-3","onUpdate:modelValue":n[15]||(n[15]=s=>e.product.imageUrl=s)},null,512),[[M,e.product.imageUrl,void 0,{trim:!0}]]),e.product.imageUrl?(_(),g("img",{key:0,src:e.product.imageUrl,alt:e.product.title},null,8,Je)):A("",!0)]),e.product.imagesUrl.length?(_(),g("div",Ye,[Xe,t("div",qe,[(_(!0),g(L,null,Y(e.product.imagesUrl,(s,u)=>(_(),g("div",{key:s,class:"col-md-6 position-relative"},[U(t("input",{type:"text",class:"form-control pe-5","onUpdate:modelValue":a=>e.product.imagesUrl[u]=a},null,8,Ke),[[M,e.product.imagesUrl[u],void 0,{trim:!0}]]),t("button",{type:"button",class:"btn btn-origin btn-inline",onClick:a=>e.product.imagesUrl.splice(u,1)},Ze,8,Qe),s?(_(),g("img",{key:0,class:"mt-3",src:s,alt:e.product.title},null,8,to)):A("",!0)]))),128))])])):A("",!0),t("button",{type:"button",class:"btn btn-primary mb-3",onClick:n[16]||(n[16]=s=>e.product.imagesUrl.push("")),disabled:e.product.imagesUrl.length>4}," 新增圖片",8,eo)],64)):A("",!0)]),U(t("div",oo,[no,e.product.imagesUrl.length<5?(_(),xt(r,{key:0,clipboardVisible:!1,"upload-state":e.uploadState,onAddNewImage:c.addNewImage,onUpdateUploadState:c.updateState},null,8,["upload-state","onAddNewImage","onUpdateUploadState"])):A("",!0)],512),[[St,e.tab==="image"]])]),t("div",ro,[t("button",{type:"button",class:"btn btn-primary",onClick:n[17]||(n[17]=(...s)=>c.confirmUpdate&&c.confirmUpdate(...s))},"確認更新"),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:n[18]||(n[18]=(...s)=>o.hideModal&&o.hideModal(...s))},"取消")])])])],512)}const io=B(oe,[["render",so],["__scopeId","data-v-94462d2e"]]),lo={components:{UploadForm:it},mixins:[rt],data(){return{modal:"",uploadState:!1}},methods:{updateState(o){this.uploadState=o}}},ao={class:"modal fade",tabindex:"-1",ref:"modal"},co={class:"modal-dialog modal-dialog-centered"},uo={class:"modal-content"},po={class:"modal-header"},fo=t("h4",{class:"mb-0"},"上傳圖片",-1),mo=["disabled"],ho=t("i",{class:"bi bi-x-circle-fill"},null,-1),bo=[ho],_o={class:"modal-body"};function go(o,n,b,x,e,c){const f=O("upload-form");return _(),g("div",ao,[t("div",co,[t("div",uo,[t("div",po,[fo,t("button",{type:"button",class:"btn border-0 p-0 fs-4",onClick:n[0]||(n[0]=(...r)=>o.hideModal&&o.hideModal(...r)),disabled:e.uploadState},bo,8,mo)]),t("div",_o,[N(f,{clipboardVisible:!0,"upload-state":e.uploadState,onUpdateUploadState:c.updateState},null,8,["upload-state","onUpdateUploadState"])])])])],512)}const yo=B(lo,[["render",go]]),vo={components:{PaginationComponent:Ut,AdminProductModal:io,UploadModal:yo,DeleteModal:Ct},data(){return{tempProduct:{}}},computed:{...ot(X,["products","displayProducts","currentPage","totalPages"])},methods:{...Z(X,["switchPage","getProducts","switchProductStatus","deleteProduct"]),openModal(o,n){this.tempProduct={...o},n==="delete"?this.$refs.deleteModal.showModal():this.$refs.productModal.showModal()}},created(){this.getProducts()}},Po={class:"text-end mb-5"},wo=t("h3",{class:"fs-2 mb-3"},"商品管理",-1),So={class:"fs-6 text-muted"},xo={class:"row justify-content-between g-3 mb-5"},ko={class:"col-md-4"},Ao={class:"h-100 alert bg-light flex-classic mb-0"},Eo=t("i",{class:"bi bi-plus-lg me-1"},null,-1),Uo=t("i",{class:"bi bi-upload me-1"},null,-1),Co={class:"col-md-8"},To={class:"h-100 alert bg-light d-flex justify-content-end mb-0"},Mo={key:0,class:"table table-hover"},$o=t("thead",null,[t("tr",null,[t("th",{width:"10%"},"分類"),t("th",{width:"40%"},"名稱"),t("th",{width:"10%",class:"text-end"},"原價"),t("th",{width:"10%",class:"text-end"},"售價"),t("th",{width:"15%",class:"text-center"},"狀態"),t("th",{width:"15%",class:"text-center"},"管理")])],-1),Vo={class:"badge bg-highlight text-dark py-2"},Lo={class:"text-end"},Io={class:"text-end"},Oo={class:"text-center"},No={class:"form-switch"},Do=["checked","onChange"],Ro={class:"text-center"},jo={class:"d-flex flex-column gap-2"},Fo=["onClick"],Ho=["onClick"],Bo={key:1,class:"alert bg-light"};function zo(o,n,b,x,e,c){const f=O("pagination-component"),r=O("upload-modal"),s=O("admin-product-modal"),u=O("delete-modal");return _(),g(L,null,[t("div",Po,[wo,t("p",So,[t("span",null,"目前共有 "+C(o.products.length)+" 項商品，",1),t("span",null,C(o.products.filter(a=>a.is_enabled).length)+" 項上架中",1)])]),t("div",xo,[t("div",ko,[t("div",Ao,[t("button",{type:"button",class:"w-100 btn btn-primary me-3",onClick:n[0]||(n[0]=(...a)=>c.openModal&&c.openModal(...a))},[Eo,W(" 新增商品")]),t("button",{type:"button",class:"w-100 btn btn-primary",onClick:n[1]||(n[1]=(...a)=>o.$refs.uploadModal.showModal&&o.$refs.uploadModal.showModal(...a))},[Uo,W(" 上傳圖片")])])]),t("div",Co,[t("div",To,[N(f,{total:o.totalPages,current:o.currentPage,onSwitchPage:o.switchPage},null,8,["total","current","onSwitchPage"])])])]),o.products.length?(_(),g("table",Mo,[$o,t("tbody",null,[(_(!0),g(L,null,Y(o.displayProducts,a=>(_(),g("tr",{key:a.id,class:"align-middle"},[t("td",null,[t("span",Vo,C(a.category),1)]),t("td",null,C(a.title),1),t("td",Lo,"$ "+C(a.origin_price),1),t("td",Io,"$ "+C(a.price),1),t("td",Oo,[t("div",No,[t("input",{type:"checkbox",role:"switch",class:"form-check-input",checked:a.is_enabled,onChange:P=>o.switchProductStatus(a)},null,40,Do)])]),t("td",Ro,[t("div",jo,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:P=>c.openModal(a,"update")}," 編輯",8,Fo),t("button",{type:"button",class:"btn btn-outline-danger",onClick:P=>c.openModal(a,"delete")}," 刪除",8,Ho)])])]))),128))])])):(_(),g("div",Bo,"還沒有任何商品！趕快建立一個吧！")),N(r,{ref:"uploadModal"},null,512),N(s,{ref:"productModal","temp-product":e.tempProduct},null,8,["temp-product"]),N(u,{ref:"deleteModal",target:e.tempProduct,"target-genre":"product",onDeleteTarget:n[2]||(n[2]=a=>o.deleteProduct(e.tempProduct.id,o.$refs.deleteModal.hideModal))},null,8,["target"])],64)}const qo=B(vo,[["render",zo]]);export{qo as default};
